<!-- ============================================
     COMPONENTE: HEADER REUTILIZABLE
     Este archivo se carga dinámicamente en todas las páginas
     Compatible con GitHub Pages y servidor local
     ============================================ -->

<header class="site-header" role="banner">
  <div class="container">
    <div class="header-container">
      <!-- Logo -->
      <a href="index.html" class="site-logo" aria-label="Brailletopía - Página principal" id="logo-link">
        <span aria-hidden="true">⠃⠗⠇</span>
        <span>Brailletopía</span>
      </a>
      
      <!-- Navegación Principal -->
      <nav class="main-nav" aria-label="Navegación principal">
        <ul class="nav-list">
          <li><a href="index.html" class="nav-link" data-page="home">Inicio</a></li>
          <li><a href="pages/cursos.html" class="nav-link" data-page="cursos">Cursos</a></li>
          <li><a href="pages/juegos.html" class="nav-link" data-page="juegos">Juegos</a></li>
          <li><a href="pages/contacto.html" class="nav-link" data-page="contacto">Contacto</a></li>
        </ul>
      </nav>
      
      <!-- Botón de Login -->
      <a href="pages/login.html" class="btn btn-primary" id="login-btn" aria-label="Iniciar sesión">
        Iniciar Sesión
      </a>
    </div>
  </div>
</header>

<script>
  // Configurar rutas según ubicación (local o GitHub Pages)
  (function() {
    const currentPath = window.location.pathname;
    const isInPages = currentPath.includes('/pages/');
    
    // Detectar si estamos en GitHub Pages
    const isGitHubPages = window.location.hostname.includes('github.io');
    const basePath = isGitHubPages ? '/brailletopia/' : '/';
    
    // Función para construir rutas correctas
    function getPath(path) {
      if (isInPages) {
        // Estamos en /pages/, usar rutas relativas
        if (path === 'index.html') return '../index.html';
        if (path.startsWith('pages/')) return path.replace('pages/', '');
        return path;
      } else {
        // Estamos en la raíz
        return path;
      }
    }
    
    // Ajustar todas las rutas
    const logo = document.getElementById('logo-link');
    const links = document.querySelectorAll('.nav-link');
    const loginBtn = document.getElementById('login-btn');
    
    logo.href = getPath('index.html');
    
    links.forEach(link => {
      const originalHref = link.getAttribute('href');
      link.href = getPath(originalHref);
      
      // Marcar página activa
      const linkPath = link.href.split('/').pop();
      const currentFile = currentPath.split('/').pop() || 'index.html';
      
      if (linkPath === currentFile || 
          (linkPath === 'index.html' && (currentFile === '' || currentFile === 'index.html'))) {
        link.classList.add('active');
        link.setAttribute('aria-current', 'page');
      }
    });
    
    if (loginBtn) {
      loginBtn.href = getPath('pages/login.html');
    }
  })();
</script>
